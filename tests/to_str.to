/* EXPECT ERROR

Syntax Error (tests/to_str.to:11:20)
  to_str: fn(): str,
                   ^
Expected ->     */

// I'm gonna need function type annotations and switch cases for this one

type Stringable = {
  to_str: fn(): str,
}

fn to_str(o: {}): str {
  switch o {
    case Stringable: o.to_str()

    default: do {
      mut out := "{"

      members(o).map(fn(name, val) {
        out += "${name}: ${val >> to_str}, "
      })

      return (out >> until(i=-2)) + "}"
    }
  }
}
